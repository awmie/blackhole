(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(5155),i=a(2115),n=a(9708),r=a(2085),o=a(9434);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:a,variant:i,size:r,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:i,size:r,className:a})),ref:t,...c})});d.displayName="Button"},895:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(5155),i=a(2115),n=a(5028),r=a(285),o=a(9434);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-muted",t),...a})}var d=a(5452),c=a(2085),u=a(5318);let f=d.bL,m=d.l9;d.bm;let h=d.ZL,b=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(d.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i,ref:t})});b.displayName=d.hJ.displayName;let g=(0,c.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),x=i.forwardRef((e,t)=>{let{side:a="right",className:i,children:n,...r}=e;return(0,s.jsxs)(h,{children:[(0,s.jsx)(b,{}),(0,s.jsxs)(d.UC,{ref:t,className:(0,o.cn)(g({side:a}),i),...r,children:[n,(0,s.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=d.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};p.displayName="SheetHeader";let v=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(d.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",a),...i})});v.displayName=d.hE.displayName,i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(d.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...i})}).displayName=d.VY.displayName;var y=a(9829),j=a(594);let N=e=>(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.5.49.09.668-.213.668-.473 0-.23-.008-.84-.012-1.647-2.782.606-3.369-1.343-3.369-1.343-.446-1.13-1.09-1.434-1.09-1.434-.89-.608.068-.596.068-.596.984.07 1.503.998 1.503.998.874 1.502 2.296 1.067 2.857.815.09-.633.34-1.067.62-1.312-2.18-.248-4.467-1.088-4.467-4.857 0-1.07.383-1.944 1.01-2.628-.1-.248-.436-1.243.098-2.59 0 0 .823-.264 2.696.994a9.403 9.403 0 012.454-.33c.83.01 1.66.11 2.454.33 1.873-1.258 2.693-.994 2.693-.994.536 1.347.2 2.342.1 2.59.628.684 1.007 1.558 1.007 2.628 0 3.78-2.29 4.605-4.475 4.85.35.305.662.902.662 1.82v2.69c0 .26.175.566.672.473C19.137 20.192 22 16.437 22 12.017 22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),k=i.lazy(()=>Promise.all([a.e(367),a.e(931),a.e(844),a.e(824)]).then(a.bind(a,5824))),w=(0,n.default)(()=>Promise.all([a.e(184),a.e(293)]).then(a.bind(a,6293)),{loadableGenerated:{webpack:()=>[6293]},ssr:!1,loading:()=>(0,s.jsx)(M,{})}),M=()=>(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)(l,{className:"h-36 w-full rounded-lg bg-sidebar-accent/30"}),(0,s.jsx)(l,{className:"h-52 w-full rounded-lg bg-sidebar-accent/30"}),(0,s.jsx)(l,{className:"h-24 w-full rounded-lg bg-sidebar-accent/30"}),(0,s.jsx)(l,{className:"h-20 w-full rounded-lg bg-sidebar-accent/30"}),(0,s.jsx)(l,{className:"h-20 w-full rounded-lg bg-sidebar-accent/30"}),(0,s.jsx)(l,{className:"h-20 w-full rounded-lg bg-sidebar-accent/30"})]});function S(){let[e,t]=(0,i.useState)(1),[a,n]=(0,i.useState)(0),[o,d]=(0,i.useState)(3),[c,u]=(0,i.useState)(.8),[h,b]=(0,i.useState)({x:0,y:2,z:5}),[g,M]=(0,i.useState)(1),[S,C]=(0,i.useState)([]),[z,R]=(0,i.useState)(0),[D,T]=(0,i.useState)(0),[P,A]=(0,i.useState)(0),[O,F]=(0,i.useState)(!1),[E,_]=(0,i.useState)(!1),[L,J]=(0,i.useState)("planet"),[H,I]=(0,i.useState)(null),[V,U]=(0,i.useState)([]),$=(0,i.useRef)(new Set),B=(0,i.useCallback)(e=>{b(e)},[]),G=(0,i.useCallback)(t=>{let s,i,n,r,l,d,c,u,f;R(e=>e+1);let m=Math.max(a,e),h=Math.max(o,m+.2);if(t){if(r=t.x,l=t.y,d=t.z,s=Math.sqrt(t.x*t.x+t.z*t.z),i=Math.atan2(t.z,t.x),n=t.y,s<.98*e){let a=t.x/s,i=t.z/s;r=a*(s=.98*e),d=i*s}}else s=m+(h-m)*(.2+.8*Math.random()),i=Math.random()*Math.PI*2,n=(Math.random()-.5)*.1,r=s*Math.cos(i),l=n,d=s*Math.sin(i);let b=+Math.pow(Math.max(.1,e)/(s=Math.max(s,.01)),.5),g={x:-(b=+Math.max(b,.02))*Math.sin(i),y:0,z:b*Math.cos(i)};"star"===L?(c="#FFFF99",u={x:.2,y:.2,z:.2},f=1):(c="hsl(".concat(360*Math.random(),", 70%, 60%)"),u={x:.1,y:.1,z:.1},f=void 0);let x=60+60*Math.random();s<1.3*e&&(x=2);let p={id:z,type:L,orbitRadius:s,currentAngle:i,velocity:g,yOffset:n,color:c,initialScale:u,timeToLive:x,isDissolving:!1,currentMassFactor:f,position:{x:r,y:l,z:d}};C(e=>[...e,p])},[z,e,o,a,L]),q=(0,i.useCallback)(()=>{O||(F(!0),T(0),A(0),setTimeout(()=>F(!1),5e3))},[O]),Y=(0,i.useCallback)(e=>{let t=S.find(t=>t.id===e);if(t){let e=!1;if("star"===t.type){let t=D+1;T(t),t>=7&&(e=!0)}else if("planet"===t.type){let t=P+1;A(t),t>=12&&(e=!0)}e&&q()}C(t=>t.filter(t=>t.id!==e))},[S,q,D,P]),Q=(0,i.useCallback)(()=>{q()},[q]),X=(0,i.useCallback)((e,t)=>{C(a=>a.map(a=>a.id===e?{...a,isDissolving:t,timeToLive:t?1.5:a.timeToLive}:a))},[]),Z=(0,i.useCallback)((e,t)=>{C(a=>a.map(a=>{if(a.id===e&&"star"===a.type){var s;let e=Math.max(.1,(null!=(s=a.currentMassFactor)?s:1)-t);return e<=.1&&!a.isDissolving?{...a,currentMassFactor:e,isDissolving:!0,timeToLive:Math.min(a.timeToLive,1.7999999999999998)}:{...a,currentMassFactor:e}}return a}))},[]),K=(0,i.useCallback)((e,t,a)=>{C(s=>s.map(s=>s.id===e?{...s,position:t,velocity:a}:s))},[]);(0,i.useEffect)(()=>{let e=S.filter(e=>!e.isDissolving);if(e.length<2)return;let t=[],a=[...S],s=!1;for(let i=0;i<e.length;i++)for(let n=i+1;n<e.length;n++){let r=e[i],o=e[n];if(!r.position||!o.position)continue;let l="".concat(r.id,"-").concat(o.id),d="".concat(o.id,"-").concat(r.id);if($.current.has(l)||$.current.has(d))continue;let c=r.position.x-o.position.x,u=r.position.y-o.position.y,f=r.position.z-o.position.z,m=Math.sqrt(c*c+u*u+f*f),h="star"===r.type?r.initialScale.x*(r.currentMassFactor||1)*.8:.8*r.initialScale.x,b="star"===o.type?o.initialScale.x*(o.currentMassFactor||1)*.8:.8*o.initialScale.x;if(m<h+b){let e={x:r.position.x+h/(h+b)*c,y:r.position.y+h/(h+b)*u,z:r.position.z+h/(h+b)*f};t.push({id:"".concat(Date.now(),"-").concat(r.id,"-").concat(o.id),point:e,color1:r.color,color2:o.color,objectId1:r.id,objectId2:o.id}),$.current.add(l),$.current.add(d);let i=e=>{let t=a.findIndex(t=>t.id===e);-1===t||a[t].isDissolving||(a[t]={...a[t],isDissolving:!0,timeToLive:1},s=!0)};i(r.id),i(o.id)}}t.length>0&&U(e=>[...e,...t]),s&&C(a);let i=setTimeout(()=>$.current.clear(),500);return()=>clearTimeout(i)},[S]);let W=(0,i.useCallback)(e=>{U(t=>t.filter(t=>t.id!==e))},[]),ee=Math.max(a,e),et=Math.max(o,ee+.1);return(0,s.jsxs)("div",{className:"flex h-screen w-screen overflow-hidden bg-background relative",children:[(0,s.jsx)("div",{className:"absolute top-4 left-4 z-20",children:(0,s.jsxs)(r.$,{variant:"outline",size:"icon",className:"bg-card/70 backdrop-blur-md text-foreground hover:bg-accent hover:text-accent-foreground",onClick:Q,title:"Trigger Hawking Radiation Jets",children:[(0,s.jsx)(y.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Trigger Jets"})]})}),(0,s.jsx)("div",{className:"absolute top-4 right-4 z-20",children:(0,s.jsxs)(f,{open:E,onOpenChange:_,children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(r.$,{variant:"outline",size:"icon",className:"bg-card/70 backdrop-blur-md text-foreground hover:bg-accent hover:text-accent-foreground",children:[(0,s.jsx)(j.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle Controls"})]})}),(0,s.jsxs)(x,{side:"right",className:"w-[350px] sm:w-[400px] bg-sidebar/70 backdrop-blur-lg text-sidebar-foreground border-sidebar-border/50 p-0 flex flex-col",children:[(0,s.jsx)(p,{className:"p-4 border-b border-sidebar-border/50",children:(0,s.jsx)(v,{className:"text-xl font-headline text-sidebar-foreground",children:"Simulation Controls"})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsx)(w,{blackHoleRadius:e,setBlackHoleRadius:e=>{t(e)},accretionDiskInnerRadius:a,setAccretionDiskInnerRadius:e=>{e>=0&&e<o?n(e):e>=o?n(Math.max(0,o-.1)):e<0&&n(0)},accretionDiskOuterRadius:o,setAccretionDiskOuterRadius:e=>{e>a&&e>=.1?d(e):e<=a?d(a+.1):e<.1&&d(Math.max(.1,a+.1))},accretionDiskOpacity:c,setAccretionDiskOpacity:u,cameraPosition:h,onSpawnObjectClick:()=>G(),selectedObjectType:L,setSelectedObjectType:J,onManualJetEmissionClick:Q,simulationSpeed:g,setSimulationSpeed:M,starAbsorptionJetTriggerCount:7,planetAbsorptionJetTriggerCount:12})})]})]})}),(0,s.jsx)("div",{className:"absolute bottom-4 left-4 z-20",children:(0,s.jsxs)("a",{href:"https://github.com/awmie",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center h-10 w-10 rounded-md border border-input bg-card/70 backdrop-blur-md text-foreground hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",title:"View on GitHub",children:[(0,s.jsx)(N,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"View on GitHub"})]})}),(0,s.jsx)("div",{className:"flex-1 w-full h-full",children:(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)(l,{className:"w-full h-full bg-muted-foreground/20 rounded-none"}),children:(0,s.jsx)(k,{blackHoleRadius:e,accretionDiskInnerRadius:ee,accretionDiskOuterRadius:et,accretionDiskOpacity:c,onCameraUpdate:B,spawnedPlanets:S,onAbsorbPlanet:Y,onSetPlanetDissolving:X,isEmittingJets:O,onCameraReady:I,onShiftClickSpawnAtPoint:G,onStarMassLoss:Z,onUpdatePlanetPosition:K,collisionEvents:V,onCollisionEventProcessed:W,simulationSpeed:g})})})]})}},5545:(e,t,a)=>{Promise.resolve().then(a.bind(a,895))},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),i=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[802,852,441,684,358],()=>t(5545)),_N_E=e.O()}]);